<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>@ViewBag.Title - Skill-Gate</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Подключение FontAwesome для иконок -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
        integrity="sha512-Fo3rlrZj/kTcXQnN4C3++...=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Подключение внешнего CSS-файла -->
  <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body>
<div class="layout">
  <!-- HEADER -->
  <header>
    <div class="header-left">
      <a href="@Url.Action("Index", "Home")" class="logo">Skill-Gate</a>
    </div>
    <div class="header-right">
      <!-- Переключатель темы -->
      <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" aria-label="Toggle theme">
        <i class="fas fa-moon" aria-hidden="true"></i>
      </button>
      <div class="auth-links">
        @if (User.Identity!.IsAuthenticated)
        {
        <a href="@Url.Action("Profile", "Account")">Profile</a>
        <a href="@Url.Action("Logout", "Account")">Logout</a>
        }
        else
        {
        <a href="@Url.Action("Login", "Account")">Login</a>
        }
      </div>
    </div>
  </header>

  <!-- SIDEBAR -->
  <aside class="sidebar" id="sidebar">
    <ul>
      <li>
        <a href="@Url.Action("Index", "Users")">
          <i class="fas fa-user" aria-hidden="true"></i>
          <span>Users</span>
        </a>
      </li>
      <li>
        <a href="@Url.Action("Index", "Roles")">
          <i class="fas fa-user-shield" aria-hidden="true"></i>
          <span>Roles</span>
        </a>
      </li>
      <li>
        <a href="@Url.Action("Index", "UserRoles")">
          <i class="fas fa-user-tag" aria-hidden="true"></i>
          <span>UserRoles</span>
        </a>
      </li>
      <li>
        <a href="@Url.Action("Index", "Products")">
          <i class="fas fa-box" aria-hidden="true"></i>
          <span>Products</span>
        </a>
      </li>
    </ul>
  </aside>

  <!-- MAINBAR -->
  <main class="mainbar light-theme" id="mainbar">
    @RenderBody()
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="footer-links">
      <a href="https://t.me/QurbonaliNazarov" target="_blank">
        <i class="fab fa-telegram" aria-hidden="true"></i>
        <span>Telegram</span>
      </a>
      <a href="https://github.com/nazarovqurbonali" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
        <span>GitHub</span>
      </a>
      <a href="https://linkedin.com/in/qurbonali-nazarov-8837b2310" target="_blank">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
        <span>LinkedIn</span>
      </a>
    </div>
  </footer>
</div>

<script>
  // При загрузке страницы устанавливаем тему из localStorage
  document.addEventListener('DOMContentLoaded', function() {
    var mainbar = document.getElementById('mainbar');
    var themeToggle = document.getElementById('themeToggle');
    var storedTheme = localStorage.getItem('theme');
    if (storedTheme === 'dark') {
      mainbar.classList.remove('light-theme');
      mainbar.classList.add('dark-theme');
      themeToggle.innerHTML = '<i class="fas fa-sun" aria-hidden="true"></i>';
    } else {
      mainbar.classList.remove('dark-theme');
      mainbar.classList.add('light-theme');
      themeToggle.innerHTML = '<i class="fas fa-moon" aria-hidden="true"></i>';
    }
  });

  function toggleTheme() {
    var mainbar = document.getElementById('mainbar');
    var themeToggle = document.getElementById('themeToggle');
    if (mainbar.classList.contains('dark-theme')) {
      // Переключение на светлую тему
      mainbar.classList.remove('dark-theme');
      mainbar.classList.add('light-theme');
      themeToggle.innerHTML = '<i class="fas fa-moon" aria-hidden="true"></i>';
      localStorage.setItem('theme', 'light');
    } else {
      // Переключение на тёмную тему
      mainbar.classList.remove('light-theme');
      mainbar.classList.add('dark-theme');
      themeToggle.innerHTML = '<i class="fas fa-sun" aria-hidden="true"></i>';
      localStorage.setItem('theme', 'dark');
    }
  }
</script>
</body>
</html>
